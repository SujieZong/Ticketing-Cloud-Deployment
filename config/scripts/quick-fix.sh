#!/bin/bash
# Quick fix for "resource already exists" errors in AWS Learner Lab

echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "๐ง AWS Learner Lab - Quick Fix"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo ""
echo "๐ฏ Problem: 'Resource already exists' errors"
echo ""
echo "โจ Solution: Use the new workflows!"
echo ""
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "๐ WORKFLOW OPTIONS:"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo ""
echo "1. ๐ full-deployment"
echo "   โ Deploy everything (infra + services)"
echo "   โ Use for: Fresh start, complete deployment"
echo ""
echo "2. ๐๏ธ  infrastructure-only"
echo "   โ Deploy only AWS infrastructure"
echo "   โ Use for: Testing infrastructure changes"
echo ""
echo "3. ๐ณ services-only"
echo "   โ Update Docker containers only"
echo "   โ Use for: Code changes, quick updates"
echo ""
echo "4. ๐๏ธ  destroy-infrastructure"
echo "   โ Proper Terraform destroy"
echo "   โ Falls back to cleanup script if no state"
echo "   โ Use for: Clean shutdown"
echo ""
echo "5. ๐งน force-cleanup (NEW!)"
echo "   โ Nuclear option, no state needed"
echo "   โ Direct AWS API cleanup"
echo "   โ Use for: When everything else fails"
echo ""
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "๐จ FIXING 'ALREADY EXISTS' ERRORS:"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo ""
echo "Step 1: Run workflow โ force-cleanup"
echo "Step 2: Wait 3 minutes โณ"
echo "Step 3: Run workflow โ full-deployment"
echo ""
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "๐ก HOW IT WORKS NOW:"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo ""
echo "โ State saved AFTER deployment (for destroy)"
echo "โ State restored ONLY for destroy"
echo "โ Fresh deploys bypass cache (no conflicts)"
echo "โ Auto-fallback if state missing"
echo ""
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo ""
echo "๐ Full guide: AWS-LEARNER-LAB-GUIDE.md"
echo ""

